-- download_and_run.lua: Script to download and run a program

-- Function to download the program
local function downloadProgram(url, filename)
    print("Downloading " .. filename .. " from " .. url)
    local result = shell.run("wget " .. url .. " " .. filename)
    return result
end

-- Function to run the program in a new shell tab
local function runProgram(filename)
    print("Running " .. filename .. " in a new shell tab")
    if multishell then
        multishell.launch({}, "shell", "run", filename)
    else
        print("Multishell not supported; running in the same shell")
        shell.run(filename)
    end
end

-- Main Execution
local url = "https://github.com/LDDestroier/enchat/raw/master/enchat3.lua"
local filename = "enchat3.lua"

if downloadProgram(url, filename) then
    runProgram(filename)
else
    print("Failed to download the program.")
end

-- Trivia game data split into multiple parts
local triviaQuestions = {
    { question1 = "The Minecraft world is infinite.", question2 = "True or False?", answer = "False" },
    { question1 = "Creepers were originally a", question2 = "coding bug. True or False?", answer = "True" },
    { question1 = "Diamonds can be mined with", question2 = "a wooden pickaxe. True or False?", answer = "False" },
    { question1 = "Gold tools mine faster than", question2 = "diamond tools. True or False?", answer = "True" },
    { question1 = "Endermen can teleport through", question2 = "walls. True or False?", answer = "True" },
    { question1 = "A sword can block damage in the", question2 = "current version of Minecraft. True or False?", answer = "False" },
    { question1 = "You can sleep in the Nether to", question2 = "set your spawn point. True or False?", answer = "False" },
    { question1 = "Obsidian can only be mined", question2 = "with a diamond pickaxe. True or False?", answer = "True" }
}

local currentQuestionIndex = 1
local triviaFeedback = "" -- Feedback message for the user

function getDynamicLine(name, page)
    if name == "triviaQuestion1" then
        return triviaQuestions[currentQuestionIndex].question1
    elseif name == "triviaQuestion2" then
        return triviaQuestions[currentQuestionIndex].question2
    elseif name == "triviaFeedback" then
        return triviaFeedback
    end
    return ""  -- Ensure no unintended output
end

-- Function to handle dynamic commands
function runDynamicCommand(name, client, page)
    print("Command received: " .. tostring(name))  -- Debugging: print command received
    local input = ""

    -- Handle specific commands
    if name == "answerTrue" then
        input = "true"
        print("Processed command: Answer True")  -- Debugging
    elseif name == "answerFalse" then
        input = "false"
        print("Processed command: Answer False")  -- Debugging
    else
        print("Unexpected command: " .. tostring(name))  -- Debugging
        return
    end

    print("Received input: '" .. tostring(input) .. "' from client " .. tostring(client))

    if input == "true" or input == "false" then
        local correctAnswer = triviaQuestions[currentQuestionIndex].answer:lower()
        if input == correctAnswer then
            triviaFeedback = "^f5RIGHT"
        else
            triviaFeedback = "^fEWRONG"
        end
        -- Move to the next question
        currentQuestionIndex = (currentQuestionIndex % #triviaQuestions) + 1
        print("Next question index: " .. tostring(currentQuestionIndex))  -- Debugging
    else
        triviaFeedback = "^fEInvalid input! Please click 'True' or 'False'."
    end

    -- Refresh the page to show the updated feedback
    refresh(client)
end

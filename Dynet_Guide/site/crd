-- Counter to keep track of user IDs
local userCounter = 1

-- Function to handle when a user joins the chat room
function handleJoinChatRoom(client)
    local userID = userCounter
    userCounter = userCounter + 1

    -- Command to join the chat room with a unique username
    local joinCommand = "chat join 123 user:" .. userID

    -- Send a formatted message that the client will interpret and execute
    rednet.send(client, "exec:" .. joinCommand)
    rednet.send(client, "ref") -- Refresh to show the chat room joined
end

-- Function to generate dynamic content
function getDynamicLine(name, page)
    if name == "joinChatRoom" then
        return "" -- Leave blank since we only trigger commands, no output needed
    end
    return "" -- Handle any other dynamic lines with an empty string
end

-- Register the custom command in Dynet
function runDynamicCommand(name, client, page)
    if name == "joinChatRoom" then
        handleJoinChatRoom(client)
    else
        print("Unexpected command: " .. tostring(name))
    end
end

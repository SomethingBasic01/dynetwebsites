-- Counter to keep track of user IDs
local userCounter = 1

-- Function to handle when a user joins the chat room
function handleJoinChatRoom(client)
    local userID = userCounter
    userCounter = userCounter + 1

    -- Command to join the chat room with a unique username
    local joinCommand = "chat join 123 user:" .. userID

    -- Open a new tab for the user to join the chat
    shell.openTab(joinCommand)
    rednet.send(client, "ref") -- Refresh to show the chat room joined
end

-- Function to generate dynamic content
function getDynamicLine(name, page)
    if name == "joinChatRoom" then
        return "" -- This can be left blank if not dynamically generating content
    end
    return "" -- Return empty string for any other cases to avoid errors
end

-- Register the custom command in Dynet
function runDynamicCommand(name, client, page)
    if name == "joinChatRoom" then
        handleJoinChatRoom(client)
    else
        print("Unexpected command: " .. tostring(name))
    end
end
